# 6. Tokenview|令牌视图

The administrator can see all the tokens of all realms he is allowed to manage in the tokenview. Each token can be located in several realms and be assigned to one user. The administrator can see all the details of the token.

管理员可以看到他在令牌视图中被允许管理的所有域的所有令牌。每个令牌可以位于多个域中并被分配给一个用户。管理员可以看到令牌的所有详细信息。

![token-view](../Contents/token-view.png)

Token View(令牌视图)

The administrator can click on one token, to show more details of this token and to perform actions on this token.

管理员可以单击一个令牌，以显示此令牌的更多详细信息，并对此令牌进行操作。

## 6.1. Token Details

令牌详细信息

The Token Details give you more information about the token and also let the administrator perform specific tasks for this token.

Token Details为您提供有关令牌的更多信息，并管理员可为此令牌执行特定任务。

![token-detail](../Contents/token-detail.png)

Token Detail(令牌详细信息)

At the bottom you see the assigned user. You can click on the username and change to the User Details.

在底部，您会看到已分配的用户。您可以单击用户名切换为User Details。

### 6.1.1. Lost token

丢失令牌

When a user has lost a token, the administrator or the user can create a temporary password token for the user to login.

The administrator has to select the token that was lost and click the button Lost token. A new token of type PW is generated. The OTP PIN of the old token is automatically copied to the new token. Thus the administrator does not know the OTP PIN, while the user can use his old PIN.

A long password is displayed to the administrator and the administrator can read this password to the user. The user now can authenticate with his old OTP PIN and the long password.

The lost token is deactivated.

当用户丢失令牌时，管理员或用户可以创建用于临时登录的密码令牌。管理员必须选择丢失的令牌，然后单击Lost Token按钮。生成password类型的新令牌。旧令牌的OTP PIN自动复制到新令牌。因此，管理员不知道OTP PIN，而用户可以使用他的旧PIN。向管理员显示长密码，管理员可以告诉用户此密码。用户现在可以使用他旧的OTP PIN和长密码进行认证。丢失的令牌被停用。

### 6.1.2. Get Serial

获取序列号

The administrator can enter a OTP value that was generated by an unknown token. Then the serial number for the corresponding token is search and displayed.

管理员可以输入由未知令牌生成的OTP值。然后，对应令牌的序列号会被查找并显示出。

> Note:
> 
> Since OTP values for all matching tokens need to be calculated, this can be time consuming!
> 
> 注：
> 
> 由于需要计算所有匹配令牌的OTP值，这可能很费时！

### 6.1.3. Token settings

令牌设置

You can change the following token settings.

您可以更改以下令牌设置。

**MaxFail and FailCount**

If the login fail counter reaches the MaxFail the user can not login with this token anymore. The Failcounter FailCount has to be reset to zero.

如果登录失败计数器达到MaxFail，用户不能再使用此令牌登录。失败计数器的FailCount必须重置为零。

**TokenDesc**

The token description is also displayed in the tokenview. You can set a description to make it easier to identify a token.

令牌描述也显示在令牌视图中。您可以设置描述，以便更轻松地识别令牌。

**CountWindow**

The CountWindow is the look ahead window of event based tokens. If the user pressed the button on an event based token the counter in the token is increased. If the user does not use this otp value to authenticate, the server does not know, that the counter in the token was increased. This way the counter in the token can get out of sync with the server.

CountWindow是基于事件的令牌的前瞻窗口。如果用户在基于事件的令牌上按下按钮，令牌中的计数器增加。如果用户不使用此otp值进行认证，则服务器不知道令牌中的计数器已增加。这样令牌中的计数器可能与服务器失去同步。

**SyncWindow**

If a token was out of sync (see CountWindow), then it needs to be synchronized. This is done by entering two consecutive OTP values. The server searches these two values within the next CountWindow (default 1000) values.

如果令牌不同步（请参阅CountWindow），则需要同步。这是通过输入两个连续的OTP值来完成的。服务器在下一个CountWindow（默认1000）值内搜索这两个值。

**OtpLen**

This is the length of the OTP value that is generated by the token. The password that is entered by the user is split according to this length. 6 or 8 characters are split as OTP value and the rest is used as static password (OTP PIN).

这是令牌生成的OTP值的长度。用户输入的密码根据此长度分割。6或8个字符分割为OTP值，其余字符用作静态密码（OTP PIN）。

**Hashlib**

The HOTP algorithm can be used with SHA1 or SHA256.

HOTP算法可以使用SHA1或SHA256。

**Tokeninfo - Auth max**

The administrator can set a value how often this token may be used for authentication. If the number of authentication try exceed this value, the token can not be used, until this Auth max value is increased.

管理员可以设置一个值，即此令牌可以用于认证的频率。如果认证尝试次数超过此值，则不能使用令牌，直到Auth max增加。

> Note:
> 
> This way you could create tokens, that can be used only once.
> 
> 注：
> 
> 这样，您可以创建只能使用一次令牌。

**Tokeninfo - Auth max success**

The administrator can set a value how often this token may be used to successfully authenticate.

管理员可以设置一个值，即此令牌可用于成功认证的频率。

笔者注：关于**Tokeninfo - Auth max**和**Tokeninfo - Auth max success**的介绍，原文使用“how often”应该是说的使用频率，但是个人感觉这两个是指的使用次数，即令牌可以用来认证的最大次数和认证成功的最大次数，超过该次数后就不能使用该令牌进行认证，但可以修改此值。

**Tokeninfo - Valid start**

A timestamp can be set. The token will only be usable for authentication after this start time.

可以设置时间戳。令牌只能在此开始时间后用于认证。

**Tokeninfo - Valid end**

A timestamp can be set. The token can only be used before this end time.

可以设置时间戳。令牌只能在此结束时间之前使用。

> Note:
> 
> This way you can create temporary tokens for guests or short time or season employees.
> 
> 注：
> 
> 这样，您可以为客人或短时间或季节员工创建临时令牌。

### 6.1.4. Resync Token

重新同步令牌

The administrator can select one token and then enter two consecutive OTP values to resynchonize the token if it was out of sync.

管理员可以选择一个令牌，然后输入两个连续的OTP值，以在令牌不同步的情况下同步令牌。

### 6.1.5. set token realm

设置令牌域

A token can be assigned to several realms. This is important if you have administrators for different realms. A realm administrator is only allowed to see tokens within his realms. He will not see tokens, that are not in his realm. So you can assign a token to realm A and realm B, thus the administrator A and the administrator B will be able to see the token.

令牌可以分配给多个域。如果您有不同域的管理员，这一点很重要。域管理员只能看到他管理的域内的令牌。不能看到没在他管理的域内的令牌。您可以为域A和域B分配令牌，以便A管理员和B管理员都能够看到令牌。

### 6.1.6. get OTP

获取OTP

If the corresponding getOTP policy (Policies) is set, the administrator can get the OTP values of a token from the server without having the token with him.

如果设置了相应的getOPT策略（Policies），管理员可以从服务器获取令牌的OTP值，而不使用令牌。

> Note:
> 
> Of course this is a potential backdoor, since the administrator could login as the user/owner of this very token.
> 
> 注：
> 
> 当然这是一个潜在的后门，因为管理员可以作为这个令牌的用户/所有者登录。

### 6.1.7. enroll

令牌注册

You can enroll a token either from the Token View or from the User Details. When enrolling a token from the User Details the token is directly assigned to the user.

If you enroll the token from the token view, you can select a user, to whom the token will be assigned.

When enrolling a token, you can select the token type and according to the token type other necessary information.

您可以从令牌视图或User Details注册令牌。当从用户详细信息注册令牌时，令牌将直接分配给该用户。如果从令牌视图注册令牌，您可以选择一个用户，令牌将被分配给该用户。注册令牌时，可以选择令牌类型并根据令牌类型选择其他必要信息。

![token-enroll](../Contents/token-enroll.png)

Token enrollment dialog(令牌注册对话框)

### 6.1.8. assign

分配

This function is used to assign a token to a user. Select a realm and start typing a username to find the user, to whom the token should be assigned.

此功能用于为用户分配令牌。选择一个域并输入用户名以查找需分配此令牌的用户。

### 6.1.9. unassign

取消分配

In the token details view you can unassign the token. After that, the token can be assigned to a new user.

在令牌详细信息视图中，您可以取消分配该令牌。之后，可以将此令牌分配给新用户。

### 6.1.10. enable

启用

If a token is disabled, it can be enabled again.

如果令牌被禁用，它可以再次启用。

### 6.1.11. disable

禁用

Tokens can be disabled. Disabled tokens still belong to the assigned user but those tokens can not be used to authenticate. Disabled tokens can be enabled again.

令牌可以禁用。禁用的令牌仍然属于分配的用户，但是这些令牌不能用于认证。可以再次将禁用的令牌启用。

### 6.1.12. set PIN

设置PIN

You can set the OTP PIN or the mOTP PIN for tokens.

您可以设置令牌的OTP PIN或mOTP PIN。

### 6.1.13. Reset Failcounter

重置失败计数器

If a used locked his token, since he entered wrong OTP values or wrong OTP PINs, the fail counter has reached the mail failcount. The administrator or help desk user can select those tokens and click the button reset failcounter to reset the fail counter to zero. The tokens can be used for authentication again.

如果用户因为输入错误的OTP值或错误的OTP PIN达到失败计数器的最大值，令牌将被锁定。管理员或帮助台用户可以选择这些令牌并单击按钮reset failcounter将失败计数器重置为零。令牌可以再次用于认证。

### 6.1.14. delete

删除

Deleting a token will remove the token from the database. The token information can not be recovered. But all events that occurred with this token still remain in the audit log.

删除令牌将从数据库中删除令牌。无法恢复令牌信息。但是使用此令牌发生的所有事件仍保留在审计日志中。

笔者注：令牌详细信息中“Disable”后面还有一个“Revoke”（吊销），可能是新版本的内容，没有加到这里（后面管理员策略里面有讲到）。点击后令牌状态会变为“disabled locked revoked”，即被禁用和锁定，并不能撤销此操作。
