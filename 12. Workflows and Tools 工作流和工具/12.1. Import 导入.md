## 12.1. Import|导入

Seed files that contain the secret keys of hardware tokens can be imported to the system via the menu Import.

包含硬件令牌密钥的种子文件可以通过Import菜单导入系统。

The default import options are to import SafeNet XML file, OATH CSV files, Yubikey CSV files or PSKC files.

默认导入选项是导入SafeNet XML文件，OATH CSV文件，Yubikey CSV文件或PSKC文件。

### 12.1.1. GPG Encryption

GPG加密

Starting with privacyIDEA 2.14 you can import GPG encrypted seed files. All files mentioned below can be encrypted this way.

从privacyIDEA 2.14开始，您可以导入GPG加密的种子文件。下面提到的所有文件都可以这样加密。

privacyIDEA needs its own GPG key. You may create one like this:

privacyIDEA需要自己的GPG密钥。您可以这样创建一个：

```
mkdir /etc/privacyidea/gpg GNUPGHOME=/etc/privacyidea/gpg gpg –gen-key
```

Then make sure, that the directory /etc/privacyidea/gpg is chown 700 for the user privacyidea.

然后确保，目录/etc/privacyidea/gpg权限为用户privacyidea下chown 700。

Now you can export the public key and hand it to your token vendor.

现在，您可以导出公钥并将其传交给令牌供应商。

```
GNUPGHOME=/etc/privacyidea/gpg gpg -a –export <keyid>
```

Now the token vendor can send the seed file GPG encrypted. You do not need to decrypt the file and store the decrypted file on a network folder. Just import the GPG encrypted file to privacyIDEA!

现在令牌供应商可以发送GPG加密过的种子文件。您不需要解密文件并将解密的文件存储在网络文件夹中。只需将GPG加密文件导入privacyIDEA！

> Note:
> 
> Using the key PI_GNUPG_HOME in pi.cfg you can change the default above mentioned GNUPGHOME directory.
> 
> Note:
> 
> privacyIDEA imports an ASCII armored file. If you get a binary file you can easily convert this binary file to an ASCII armored output like this: `gpg -enarmor import.csv.gpg`
> 
> 注：
> 
> 使用pi.cfg中的PI_GNUPG_HOME键可以更改上述缺省的GNUPGHOME目录。
> 
> 注：
> 
> privacyIDEA导入ASCII装甲文件。如果你得到一个二进制文件，你可以很容易地将这个二进制文件转换为ASCII装甲输出，如下所示：`gpg -enarmor import.csv.gpg`

### 12.1.2. OATH CSV

This is a very simple CSV file to import HOTP, TOTP or OATH tokens. You can also convert your seed easily to this file format, to import the tokens.

这是一个非常简单的CSV文件，用于导入HOTP，TOTP或OATH令牌。您还可以轻松地将您的种子转换为此文件格式，以导入令牌。

The file format looks like this:

文件格式如下所示：

```
<serial>, <seed>, <type>, <otp length>, <time step>
```

For OCRA tokens it looks like this:

对于OCRA令牌，看起来像这样：

```
<serial>, <seed>, OCRA, <ocra suite>
```

**serial** is the serial number of the token that will also be used to identify the token in the database. Importing the same serial number twice will overwrite the token data.(是令牌的序列号，也将用于标识数据库中的令牌。 导入相同的序列号两次将覆盖令牌数据)

**seed** is the secret key, that is used to calculate the OTP value. The seed is provided in a hexadecimal notation. Depending on the length either the SHA1 or SHA256 hash algorithm is identified.(是密钥，用于计算OTP值。种子以十六进制符号提供。根据SHA1或SHA256散列算法长度确定)

**type** is either HOTP, TOTP or OCRA.(是HOTP，TOTP或OCRA)

**otp length** is the length of the OTP value generated by the token. This is usually 6 or 8.(是令牌生成的OTP值的长度。通常是6或8)

**time step** is the time step of TOTP tokens. This is usually 30 or 60.(是TOTP令牌的时间步长。通常是30或60。)

**ocra suite** is the ocra suite of the OCRA token according to <span id="id1">[[1]](#ocra)</span>.(是OCRA令牌依据的ocra套件)

### 12.1.3. Yubikey CSV

Here you can import the CSV file that is written by the Yubikey personalization tool <span id="id2">[[2]](#yubipers)</span>. privacyIDEA can import all Yubikey modes, either Yubico mode or HOTP mode.

在这里您可以导入由Yubikey个性化工具编写的CSV文件 [[2]](#yubipers)。privacyIDEA可以导入所有Yubikey模式，Yubico模式或HOTP模式。

![yubikey1](../Contents/yubikey1.png)

> Note:
> 
> There is an annoying drawback of the personalization tool: If you a initializing several HOTP yubikeys it will not write the serial number to the file.
> 
> 注：
> 
> 个性化工具有一个恼人的缺点：如果您一次初始化几个HOTP yubikeys，它不会将序列号写入文件。

### 12.1.4. PSKC

The Portable Symmetric Key Container is specified in <span id="id3">[[3]](#rfc6030)</span>. OATH compliant token vendors provide the token seeds in a PSKC file. privacyIDEA lets you import PSKC files. All necessary information (OTP length, Hash algorithm, token type) are read from the file.

在 [[3]](#rfc6030)中指定了可移植对称密钥容器。OATH兼容的令牌供应商在PSKC文件中提供令牌种子。privacyIDEA允许您导入PSKC文件。从文件中读取所有必要的信息（OTP长度，散列算法，令牌类型）

> <span id="ocra">[[1]](#id1)</span>:
> 
> <http://tools.ietf.org/html/rfc6287#section-6>
> 
> <span id="yubipers">[[2]](#id2)</span>:
> 
> <http://www.yubico.com/products/services-software/personalization-tools/use/>
> 
> <span id="rfc6030">[[3]](#id3)</span>:
> 
> <https://tools.ietf.org/html/rfc6030>